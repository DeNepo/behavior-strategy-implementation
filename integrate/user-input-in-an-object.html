<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset='utf-8'>
  <title>User Input in an Object</title>

  <style>
    .centered {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
    }
  </style>

  <script id='script-variables'>
    const userEntries = {};
  </script>

  <script id='handlers'>
    'use strict';

    const displayEntriesHandler = () => {
      debugger;

      console.log('-- action: display values --');
      console.log('userEntries:', typeof userEntries, '\n', userEntries);

      const stringToDisplay = Object.entries(userEntries)
        .reduce((message, nextEntry) => {
          const nextLine = nextEntry[0] + ': ' + nextEntry[1];
          return message + '\n' + nextLine;
        }, 'all entries:');
      console.log('stringToDisplay:', typeof stringToDisplay, '\n', stringToDisplay);

      alert(stringToDisplay);
    };

    const writeEntryHandler = () => {
      debugger;

      console.log('-- action: write entry --');
      console.log('userEntries (before):', '\n', userEntries);

      const key = prompt('enter a key:');
      console.log('key:', typeof key, '\n', key);
      if (key === null) {
        return;
      }

      const newValue = prompt('enter a value:');
      console.log('newValue:', typeof newValue, '\n', newValue);
      if (newValue === null) {
        return;
      }
      userEntries[key] = newValue;

      console.log('userEntries (after):', typeof userEntries, '\n', userEntries);

      displayEntriesHandler();
    };

    const deleteEntryHandler = () => {
      debugger;

      console.log('-- action: delete entry --');
      console.log('userEntries (before):', '\n', userEntries);

      const key = prompt('enter a key to delete:');
      console.log('key:', typeof key, '\n', key);
      if (key === null) {
        return;
      }

      const keyExists = Object.keys(userEntries)
        .includes(key); // does the array include this exact string?


      if (keyExists) {
        delete userEntries[key];
        console.log('userEntries (after):', typeof userEntries, '\n', userEntries);
        displayEntriesHandler();
      } else {
        alert(`"${key}" does not exist`);
      }

    };
  </script>
</head>

<body>

  <main id='user interface' class='centered'>
    <button onclick="writeEntryHandler()">write an entry</button> <br>
    <button onclick="deleteEntryHandler()">delete an entry</button> <br>
    <button onclick="displayEntriesHandler()">display all userEntries</button>
  </main>

</body>

</html>
